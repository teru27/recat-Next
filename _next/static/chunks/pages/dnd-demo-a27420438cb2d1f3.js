(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{9597:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dnd-demo",function(){return __webpack_require__(8611)}])},8611:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return App}});var jsx_runtime=__webpack_require__(5893),core_esm=__webpack_require__(887),sortable_esm=__webpack_require__(5587),utilities_esm=__webpack_require__(4285);let Card=param=>{let{id,title}=param,{attributes,listeners,setNodeRef,transform}=(0,sortable_esm.nB)({id:id}),style={margin:"10px",opacity:1,color:"#333",background:"white",padding:"10px",transform:utilities_esm.ux.Transform.toString(transform)};return(0,jsx_runtime.jsx)("div",{ref:setNodeRef,...attributes,...listeners,style:style,children:(0,jsx_runtime.jsx)("div",{id:id,children:(0,jsx_runtime.jsx)("p",{children:title})})})},Column=param=>{let{id,title,cards}=param,{setNodeRef}=(0,core_esm.Zj)({id:id});return(0,jsx_runtime.jsx)(sortable_esm.Fo,{id:id,items:cards,strategy:sortable_esm.U2,children:(0,jsx_runtime.jsxs)("div",{ref:setNodeRef,style:{width:"200px",background:"rgba(245,247,249,1.00)",marginRight:"10px"},children:[(0,jsx_runtime.jsx)("p",{style:{padding:"5px 20px",textAlign:"left",fontWeight:"500",color:"#575757"},children:title}),cards.map(card=>(0,jsx_runtime.jsx)(Card,{id:card.id,title:card.title},card.id))]})})};var react=__webpack_require__(7294);function App(){let[columns,setColumns]=(0,react.useState)([{id:"Column1",title:"Column1",cards:[{id:"Card1",title:"Card1"},{id:"Card2",title:"Card2"}]},{id:"Column2",title:"Column2",cards:[{id:"Card3",title:"Card3"},{id:"Card4",title:"Card4"}]}]),sensors=(0,core_esm.Dy)((0,core_esm.VT)(core_esm.we),(0,core_esm.VT)(core_esm.Lg,{coordinateGetter:sortable_esm.is})),findColumn=unique=>{var ref,ref1,ref2;if(!unique)return null;if(columns.some(c=>c.id===unique))return null!==(ref1=columns.find(c=>c.id===unique))&&void 0!==ref1?ref1:null;let id=String(unique),itemWithColumnId=columns.flatMap(c=>{let columnId=c.id;return c.cards.map(i=>({itemId:i.id,columnId:columnId}))}),columnId=null===(ref=itemWithColumnId.find(i=>i.itemId===id))||void 0===ref?void 0:ref.columnId;return null!==(ref2=columns.find(c=>c.id===columnId))&&void 0!==ref2?ref2:null},handleDragOver=event=>{let{active,over,delta}=event,activeId=String(active.id),overId=over?String(over.id):null,activeColumn=findColumn(activeId),overColumn=findColumn(overId);if(!activeColumn||!overColumn||activeColumn===overColumn)return null;setColumns(prevState=>{let activeItems=activeColumn.cards,overItems=overColumn.cards,activeIndex=activeItems.findIndex(i=>i.id===activeId),overIndex=overItems.findIndex(i=>i.id===overId),newIndex=()=>{let putOnBelowLastItem=overIndex===overItems.length-1&&delta.y>0;return overIndex>=0?overIndex+(putOnBelowLastItem?1:0):overItems.length+1};return prevState.map(c=>c.id===activeColumn.id?(c.cards=activeItems.filter(i=>i.id!==activeId),c):(c.id===overColumn.id&&(c.cards=[...overItems.slice(0,newIndex()),activeItems[activeIndex],...overItems.slice(newIndex(),overItems.length)]),c))})},handleDragEnd=event=>{let{active,over}=event,activeId=String(active.id),overId=over?String(over.id):null,activeColumn=findColumn(activeId),overColumn=findColumn(overId);if(!activeColumn||!overColumn||activeColumn!==overColumn)return null;let activeIndex=activeColumn.cards.findIndex(i=>i.id===activeId),overIndex=overColumn.cards.findIndex(i=>i.id===overId);activeIndex!==overIndex&&setColumns(prevState=>prevState.map(column=>(column.id===activeColumn.id&&(column.cards=(0,sortable_esm.Rp)(overColumn.cards,activeIndex,overIndex)),column)))};return(0,jsx_runtime.jsx)(core_esm.LB,{sensors:sensors,collisionDetection:core_esm.ey,onDragEnd:handleDragEnd,onDragOver:handleDragOver,children:(0,jsx_runtime.jsx)("div",{className:"App",style:{display:"flex",flexDirection:"row",padding:"20px"},children:columns.map(column=>(0,jsx_runtime.jsx)(Column,{id:column.id,title:column.title,cards:column.cards},column.id))})})}}},function(__webpack_require__){__webpack_require__.O(0,[587,774,888,179],function(){return __webpack_require__(__webpack_require__.s=9597)}),_N_E=__webpack_require__.O()}]);