(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{3405:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/mh_id",function(){return __webpack_require__(3079)}])},3079:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return App}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),image_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1664),tesseract_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7320),react_dropzone__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2002);function App(){let[base64Images,setBase64Images]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[imageText,setImageText]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[msg,setMsg]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),getTextImage=async base64CapImg=>{let image=await image_js__WEBPACK_IMPORTED_MODULE_2__.Ee.load(base64CapImg);if(image){let ocrImg=image.crop({x:150,y:270}).flipY().crop({x:1400,y:750}).flipY().toBase64("image/png");return setBase64Images("".concat(ocrImg)),"data:image/png;base64,".concat(ocrImg)}},onDrop=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(files=>{if(0===files.length){setMsg("読み込みに失敗しました。");return}let file=files[0];if("image/png"!==file.type&&"image/jpeg"!==file.type){setMsg("png, jpeg以外のファイルがドロップされました。");return}let fileReader=new FileReader;fileReader.onload=()=>{setMsg("読み込み中"),setImageText("");let imageSrc=fileReader.result;getTextImage(imageSrc).then(ocrImg=>{void 0!=ocrImg&&imageToText(ocrImg)})},fileReader.readAsDataURL(file)},[]),{getRootProps,getInputProps,isDragActive}=(0,react_dropzone__WEBPACK_IMPORTED_MODULE_4__.uI)({onDrop}),imageToText=async base64Image=>{let worker=await (0,tesseract_js__WEBPACK_IMPORTED_MODULE_3__.createWorker)("jpn"),{data:{text}}=await worker.recognize(base64Image);await worker.terminate(),setImageText(text.replace(/\s/g,""))};return(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{setMsg("")},[imageText]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[""!=msg?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:msg}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{}),"ドラッグ&ドロップ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{...getRootProps(),style:{height:"400px",width:"400px",border:"solid 1px #000000"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{...getInputProps()}),isDragActive?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:"Drop the files here ..."}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]})]}),""!=base64Images?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"data:image/png;base64,".concat(base64Images)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{children:imageText})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{})]})}}},function(__webpack_require__){__webpack_require__.O(0,[655,642,832,774,888,179],function(){return __webpack_require__(__webpack_require__.s=3405)}),_N_E=__webpack_require__.O()}]);